Bootstrap: docker
From: milvusdb/milvus:latest

%environment
    export ETCD_ENDPOINTS=localhost:2379
    export MINIO_ADDRESS=localhost:9000
    export PULSAR_ADDRESS=pulsar://localhost:6650

%post
    # Install any additional dependencies if needed
    echo "Milvus vector database container built successfully"

%runscript
    # Start Milvus server with GPU support
    exec milvus run standalone

%labels
    Author Team6
    Version 0.2.0
    Description Milvus vector database for benchmarking with GPU support

%help
    This container runs the Milvus vector database service with GPU support.
    
    Note: Milvus requires etcd, MinIO, and Pulsar for standalone mode.
    For benchmarking, it's recommended to use docker-compose or separate containers.
    
    Usage:
        apptainer run --nv milvus.sif
    
    Note: Use --nv flag to enable NVIDIA GPU support for GPU-accelerated indexing
    
    Default configuration:
        Port: 19530 (gRPC)
        Port: 9091 (HTTP)
    
    API endpoint: localhost:19530
